<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Go 环境变量、编程标准、程序测试和基础包 | Fabian Bao</title><meta name="keywords" content="go,语法"><meta name="author" content="Fabian Bao"><meta name="copyright" content="Fabian Bao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Go 环境变量、编程标准、程序测试和基础包">
<meta property="og:type" content="article">
<meta property="og:title" content="Go 环境变量、编程标准、程序测试和基础包">
<meta property="og:url" content="https://fabian4.site/blog/22341.html">
<meta property="og:site_name" content="Fabian Bao">
<meta property="og:description" content="Go 环境变量、编程标准、程序测试和基础包">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png">
<meta property="article:published_time" content="2020-12-13T16:00:00.000Z">
<meta property="article:modified_time" content="2022-08-24T07:47:19.049Z">
<meta property="article:author" content="Fabian Bao">
<meta property="article:tag" content="go">
<meta property="article:tag" content="语法">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png"><link rel="shortcut icon" href="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/202015ouknbvshlsrvbku5.jpeg.icon.png"><link rel="canonical" href="https://fabian4.site/blog/22341"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-XWFMDD4FVV"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XWFMDD4FVV');
</script><script>const GLOBAL_CONFIG = { 
  root: '/blog/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Go 环境变量、编程标准、程序测试和基础包',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-24 15:47:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/blog/atom.xml" title="Fabian Bao" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://fabian4.site/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">73</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">54</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/blog/read/"><i class="fa-fw fa fa-book"></i><span> 阅读</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/blog/">Fabian Bao</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/blog/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/blog/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/blog/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/blog/read/"><i class="fa-fw fa fa-book"></i><span> 阅读</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Go 环境变量、编程标准、程序测试和基础包</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-13T16:00:00.000Z" title="发表于 2020-12-14 00:00:00">2020-12-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-24T07:47:19.049Z" title="更新于 2022-08-24 15:47:19">2022-08-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/blog/categories/go/">go</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>28分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Go 环境变量、编程标准、程序测试和基础包"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/blog/22341.html#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Go-环境变量、编程标准、程序测试和基础包"><a href="#Go-环境变量、编程标准、程序测试和基础包" class="headerlink" title="Go 环境变量、编程标准、程序测试和基础包"></a>Go 环境变量、编程标准、程序测试和基础包</h1><h2 id="一、环境变量"><a href="#一、环境变量" class="headerlink" title="一、环境变量"></a>一、环境变量</h2><p>Go语言各种值类型，包括字符串、整数、浮点数、布尔值等。下面是一些基本示例。</p>
<p>Go语言最主要的特性：</p>
<ul>
<li>自动垃圾回收</li>
<li>更丰富的内置类型</li>
<li>函数多返回值</li>
<li>错误处理</li>
<li>匿名函数和闭包</li>
<li>类型和接口</li>
<li>并发编程</li>
<li>反射</li>
<li>语言交互性</li>
</ul>
<p>接着熟悉下Go环境变量:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&gt; go <span class="built_in">env</span></span><br><span class="line">GO111MODULE=<span class="string">&quot;auto&quot;</span></span><br><span class="line">GOARCH=<span class="string">&quot;amd64&quot;</span></span><br><span class="line">GOBIN=<span class="string">&quot;/Users/admin/goTest/bin&quot;</span></span><br><span class="line">GOCACHE=<span class="string">&quot;/Users/admin/Library/Caches/go-build&quot;</span></span><br><span class="line">GOENV=<span class="string">&quot;/Users/admin/Library/Application Support/go/env&quot;</span></span><br><span class="line">GOEXE=<span class="string">&quot;&quot;</span></span><br><span class="line">GOFLAGS=<span class="string">&quot;&quot;</span></span><br><span class="line">GOHOSTARCH=<span class="string">&quot;amd64&quot;</span></span><br><span class="line">GOHOSTOS=<span class="string">&quot;darwin&quot;</span></span><br><span class="line">GOINSECURE=<span class="string">&quot;&quot;</span></span><br><span class="line">GOMODCACHE=<span class="string">&quot;/Users/admin/goTest/pkg/mod&quot;</span></span><br><span class="line">GONOPROXY=<span class="string">&quot;&quot;</span></span><br><span class="line">GONOSUMDB=<span class="string">&quot;&quot;</span></span><br><span class="line">GOOS=<span class="string">&quot;darwin&quot;</span></span><br><span class="line">GOPATH=<span class="string">&quot;/Users/admin/goTest&quot;</span></span><br><span class="line">GOPRIVATE=<span class="string">&quot;&quot;</span></span><br><span class="line">GOPROXY=<span class="string">&quot;https://goproxy.cn,direct&quot;</span></span><br><span class="line">GOROOT=<span class="string">&quot;/usr/local/go&quot;</span></span><br><span class="line">GOSUMDB=<span class="string">&quot;sum.golang.org&quot;</span></span><br><span class="line">GOTMPDIR=<span class="string">&quot;&quot;</span></span><br><span class="line">GOTOOLDIR=<span class="string">&quot;/usr/local/go/pkg/tool/darwin_amd64&quot;</span></span><br><span class="line">GCCGO=<span class="string">&quot;gccgo&quot;</span></span><br><span class="line">AR=<span class="string">&quot;ar&quot;</span></span><br><span class="line">CC=<span class="string">&quot;clang&quot;</span></span><br><span class="line">CXX=<span class="string">&quot;clang++&quot;</span></span><br><span class="line">CGO_ENABLED=<span class="string">&quot;1&quot;</span></span><br><span class="line">GOMOD=<span class="string">&quot;&quot;</span></span><br><span class="line">CGO_CFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">CGO_CPPFLAGS=<span class="string">&quot;&quot;</span></span><br><span class="line">CGO_CXXFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">CGO_FFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">CGO_LDFLAGS=<span class="string">&quot;-g -O2&quot;</span></span><br><span class="line">PKG_CONFIG=<span class="string">&quot;pkg-config&quot;</span></span><br><span class="line">GOGCCFLAGS=<span class="string">&quot;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/kp/3yqnp9cj4f3_9539b06q4yyc0000gn/T/go-build238604917=/tmp/go-build -gno-record-gcc-switches -fno-common&quot;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>GO111MODULE</td>
<td>是一个环境变量, on 仍将强制使用Go模块,off 强制Go表现出GOPATH方式,auto 是默认模式。</td>
</tr>
<tr>
<td>GOARCH</td>
<td>程序构建环境的目标计算架构</td>
</tr>
<tr>
<td>GOBIN</td>
<td>该环境变量的值为 Go 程序的可执行文件的目录</td>
</tr>
<tr>
<td>GOCACHE</td>
<td>存储编译后信息的缓存目录</td>
</tr>
<tr>
<td>GOENV</td>
<td>本地的go环境文件存储位置</td>
</tr>
<tr>
<td>GOEXE</td>
<td>可执行文件名后缀(“.exe” on Windows)</td>
</tr>
<tr>
<td>GOFLAGS</td>
<td>当给定标志被当前命令已知时，默认情况下以空格分隔的-flag &#x3D; value设置列表将应用于go命令。</td>
</tr>
<tr>
<td>GOHOSTARCH</td>
<td>Go工具链二进制文件的体系结构（GOARCH）。</td>
</tr>
<tr>
<td>GOINSECURE</td>
<td>逗号分隔的模块路径前缀列表（按Go的path.Match语法），应始终以不安全的方式获取。仅适用于直接获取的依赖项。</td>
</tr>
<tr>
<td>GOMODCACHE</td>
<td>Go命令将存储下载的模块的目录。</td>
</tr>
<tr>
<td>GOOS</td>
<td>为其编译代码的操作系统。例如linux，darwin，windows，netbsd。</td>
</tr>
<tr>
<td>GOPATH</td>
<td>Go 命令依赖一个重要的环境变量,GOPATH允许多个目录，当有多个目录时，请注意分隔符.</td>
</tr>
<tr>
<td>GOPRIVATE</td>
<td>Go的私有模块仓库</td>
</tr>
<tr>
<td>GOPROXY</td>
<td>Go的mod代理</td>
</tr>
<tr>
<td>GOROOT</td>
<td>Go安装目录的绝对路径</td>
</tr>
<tr>
<td>GOSUMDB</td>
<td>要使用的校验和数据库的名称，以及可选的公用密钥和URL。</td>
</tr>
<tr>
<td>GOTMPDIR</td>
<td>Go命令将在其中写入临时源文件，程序包和二进制文件的目录。</td>
</tr>
<tr>
<td>GOTOOLDIR</td>
<td>Go tool的安装目录</td>
</tr>
<tr>
<td>GCCGO</td>
<td>为”go build -compiler &#x3D; gccgo”运行的gccgo命令。</td>
</tr>
<tr>
<td>AR</td>
<td>使用gccgo编译器进行构建时用于处理库归档文件的命令。</td>
</tr>
<tr>
<td>CC</td>
<td>用于编译C代码</td>
</tr>
<tr>
<td>CXX</td>
<td>用于编译C代码</td>
</tr>
<tr>
<td>CGO_ENABLED</td>
<td>是否支持cgo命令</td>
</tr>
<tr>
<td>GOMOD</td>
<td>主模块go.mod的绝对路径。如果启用了模块感知模式，但没有go.mod，则GOMOD将为os.DevNull</td>
</tr>
</tbody></table>
<h2 id="二、编程标准和规范"><a href="#二、编程标准和规范" class="headerlink" title="二、编程标准和规范"></a>二、编程标准和规范</h2><h3 id="1-行长"><a href="#1-行长" class="headerlink" title="1. 行长"></a>1. 行长</h3><ul>
<li>一行最长不超过80个字符，超过的使用换行展示，尽量保持格式优雅。</li>
</ul>
<h3 id="2-文件名命名规范"><a href="#2-文件名命名规范" class="headerlink" title="2. 文件名命名规范"></a>2. 文件名命名规范</h3><ul>
<li>文件名命名用小写，尽量见名思义，看见文件名就可以知道这个文件下的大概内容，对于源代码里的文件，文件名要很好的代表了一个模块实现的功能。</li>
</ul>
<h3 id="3-包"><a href="#3-包" class="headerlink" title="3. 包"></a>3. 包</h3><ul>
<li>包名应该为小写单词，不要使用下划线或者混合大小写。</li>
<li>每个包都应该有一个包注释，包如果有多个go文件，就只需要在入口文件写包注释.</li>
<li>概况以 Package 开头。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright 2009 The Go Authors. All rights reserved.</span></span><br><span class="line"><span class="comment">// Use of this source code is Governed by a BSD-style</span></span><br><span class="line"><span class="comment">// license that can be found in the LICENSE file.</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Package strings implements simple functions to manipulate strings.</span></span><br><span class="line"><span class="keyword">package</span> strings</span><br></pre></td></tr></table></figure>

<h3 id="4-命名"><a href="#4-命名" class="headerlink" title="4. 命名"></a>4. 命名</h3><ul>
<li>包名用小写,使用短命名,尽量和标准库不要冲突.</li>
<li>使用短命名，因为长名字并不会使得事物更易读，文档注释会比格外长的名字更有用.</li>
<li>需要导出的任何类型必须以大写字母开头.</li>
</ul>
<h3 id="5-变量"><a href="#5-变量" class="headerlink" title="5. 变量"></a>5. 变量</h3><ul>
<li>全局变量：驼峰式，可导出的使用大写字母开头.</li>
<li>参数传递：驼峰式，小写字母开头.</li>
<li>局部变量：下划线风格命名.</li>
</ul>
<h3 id="6-接口"><a href="#6-接口" class="headerlink" title="6. 接口"></a>6. 接口</h3><ul>
<li>单个函数的接口名以”er”作为后缀，如Reader,Writer</li>
<li>接口的实现则去掉“er”</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Reader <span class="keyword">interface</span> &#123;</span><br><span class="line">        Read(p ****<span class="type">byte</span>) (n <span class="type">int</span>, err <span class="type">error</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>两个函数的接口名综合两个函数名</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> WriteFlusher <span class="keyword">interface</span> &#123;</span><br><span class="line">    Write(****<span class="type">byte</span>) (<span class="type">int</span>, <span class="type">error</span>)</span><br><span class="line">    Flush <span class="type">error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>三个以上函数的接口名，类似于结构体名</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Vehicle <span class="keyword">interface</span> &#123;</span><br><span class="line">    Start(****<span class="type">byte</span>) </span><br><span class="line">    Stop <span class="type">error</span></span><br><span class="line">    Recover</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-函数和结构体"><a href="#7-函数和结构体" class="headerlink" title="7. 函数和结构体"></a>7. 函数和结构体</h3><ul>
<li>函数名采用驼峰命名法，尽量不要使用下划线</li>
<li>写概况，并且使用被声明的名字作为开头。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Compile parses a regular expression and returns, if successful, a Regexp</span></span><br><span class="line"><span class="comment">// object that can be used to match against text.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Compile</span><span class="params">(str <span class="type">string</span>)</span></span> (regexp *Regexp, err <span class="type">error</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Request represents a request to run a command.</span></span><br><span class="line"><span class="keyword">type</span> Request <span class="keyword">struct</span> &#123; ...&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>采用命名的多返回值，在godoc生成的文档中，带有返回值的函数声明更利于理解。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">nextInt</span><span class="params">(b ****<span class="type">byte</span>, pos <span class="type">int</span>)</span></span> (value, nextPos <span class="type">int</span>, err <span class="type">error</span>) &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8-import"><a href="#8-import" class="headerlink" title="8.import"></a>8.import</h3><ul>
<li>对标准包，程序内部包，第三方包进行分组。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;encoding/json&quot;</span>         <span class="comment">//标准包</span></span><br><span class="line">    <span class="string">&quot;strings&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;spike/models&quot;</span>      <span class="comment">//内部包</span></span><br><span class="line">    <span class="string">&quot;spike/utils&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">&quot;github.com/go-sql-driver/mysql&quot;</span>    <span class="comment">//第三方包</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>引用包时不要使用相对路径。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误的做法</span></span><br><span class="line"><span class="keyword">import</span> “../net”</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 正确的做法</span></span><br><span class="line"><span class="keyword">import</span> “github.com/repo/proj/src/net”</span><br></pre></td></tr></table></figure>

<h3 id="9-错误处理"><a href="#9-错误处理" class="headerlink" title="9. 错误处理"></a>9. 错误处理</h3><ul>
<li>error作为函数的值返回,必须尽快对error进行处理</li>
<li>错误描述如果是英文必须为小写，不需要标点结尾</li>
<li>采用独立的错误流进行处理</li>
<li>不要在逻辑代码中使用panic</li>
</ul>
<p>不推荐的方式：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="comment">// error handling</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// normal code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>推荐的方式:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="comment">// error handling</span></span><br><span class="line">    <span class="keyword">return</span> <span class="comment">// or continue, etc.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// normal code</span></span><br></pre></td></tr></table></figure>

<p>如果返回值需要初始化，则采用下面的方式:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">x, err := f</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="comment">// error handling</span></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// use x</span></span><br></pre></td></tr></table></figure>

<ul>
<li>panic</li>
</ul>
<p>在main包中只有当实在不可运行的情况采用panic，例如文件无法打开，数据库无法连接导致程序无法 正常运行，但是对于其他的package对外的接口不能有panic，只能在包内采用。 建议在main包中使用log.Fatal来记录错误，这样就可以由log来结束程序。</p>
<ul>
<li>Recover</li>
</ul>
<p>recover用于捕获runtime的异常，禁止滥用recover，在开发测试阶段尽量不要用recover，recover一般放在你认为会有不可预期的异常的地方。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">server</span><span class="params">(workChan &lt;-<span class="keyword">chan</span> *Work)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> work := <span class="keyword">range</span> workChan &#123;</span><br><span class="line">        <span class="keyword">go</span> safelyDo(work)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">safelyDo</span><span class="params">(work *Work)</span></span> &#123;</span><br><span class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> err := <span class="built_in">recover</span>; err != <span class="literal">nil</span> &#123;</span><br><span class="line">            log.Println(<span class="string">&quot;work failed:&quot;</span>, err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// do 函数可能会有不可预期的异常</span></span><br><span class="line">    do(work)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Defer</li>
</ul>
<p>defer在函数return之前执行，对于一些资源的回收用defer是好的，但也禁止滥用defer，defer是需要消耗性能的,所以频繁调用的函数尽量不要使用defer。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Contents returns the file&#x27;s contents as a string.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Contents</span><span class="params">(filename <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">error</span>) &#123;</span><br><span class="line">    f, err := os.Open(filename)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>, err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">defer</span> f.Close  <span class="comment">// f.Close will run when we&#x27;re finished.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result ****<span class="type">byte</span></span><br><span class="line">    buf := <span class="built_in">make</span>(****<span class="type">byte</span>, <span class="number">100</span>)</span><br><span class="line">    <span class="keyword">for</span> &#123;</span><br><span class="line">        n, err := f.Read(buf**<span class="number">0</span>:**)</span><br><span class="line">        result = <span class="built_in">append</span>(result, buf**<span class="number">0</span>:n**...) <span class="comment">// append is discussed later.</span></span><br><span class="line">        <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> err == io.EOF &#123;</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>, err  <span class="comment">// f will be closed if we return here.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">string</span>(result), <span class="literal">nil</span> <span class="comment">// f will be closed if we return here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="10-控制结构"><a href="#10-控制结构" class="headerlink" title="10. 控制结构"></a>10. 控制结构</h3><ul>
<li>if</li>
</ul>
<p>if接受初始化语句，约定如下方式建立局部变量</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> err := file.Chmod(<span class="number">0664</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>for</li>
</ul>
<p>采用短声明建立局部变量.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">10</span>; i++ &#123;</span><br><span class="line">    sum += i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>range</li>
</ul>
<p>如果只需要第一项（key），就丢弃第二个：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key := <span class="keyword">range</span> m &#123;</span><br><span class="line">    <span class="keyword">if</span> key.expired &#123;</span><br><span class="line">        <span class="built_in">delete</span>(m, key)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果只需要第二项，则把第一项置为下划线.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _, value := <span class="keyword">range</span> array &#123;</span><br><span class="line">    sum += value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ul>
<li>switch</li>
</ul>
<p>Go的switch比C更普遍.</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">unhex</span><span class="params">(c <span class="type">byte</span>)</span></span> <span class="type">byte</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;0&#x27;</span> &lt;= c &amp;&amp; c &lt;= <span class="string">&#x27;9&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span> &lt;= c &amp;&amp; c &lt;= <span class="string">&#x27;f&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">&#x27;a&#x27;</span> + <span class="number">10</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span> &lt;= c &amp;&amp; c &lt;= <span class="string">&#x27;F&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> c - <span class="string">&#x27;A&#x27;</span> + <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>没有自动转换，但可以用逗号分隔的列表呈现:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">shouldEscape</span><span class="params">(c <span class="type">byte</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> c &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;?&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;#&#x27;</span>, <span class="string">&#x27;+&#x27;</span>, <span class="string">&#x27;%&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>虽然它们在Go中几乎不像其他类似C语言那么常见，但可以使用break语句尽早终止切换:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n := <span class="number">0</span>; n &lt; <span class="built_in">len</span>(src); n += size &#123;</span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> src**n** &lt; sizeOne:</span><br><span class="line">        <span class="keyword">if</span> validateOnly &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        size = <span class="number">1</span></span><br><span class="line">        update(src**n**)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> src**n** &lt; sizeTwo:</span><br><span class="line">        <span class="keyword">if</span> n+<span class="number">1</span> &gt;= <span class="built_in">len</span>(src) &#123;</span><br><span class="line">            err = errShortInput</span><br><span class="line">            <span class="keyword">break</span> Loop</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> validateOnly &#123;</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        size = <span class="number">2</span></span><br><span class="line">        update(src**n** + src**n+<span class="number">1</span>**&lt;&lt;shift)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里是使用两个switch语句的字节片的:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Compare returns an integer comparing the two byte slices,</span></span><br><span class="line"><span class="comment">// lexicographically.</span></span><br><span class="line"><span class="comment">// The result will be 0 if a == b, -1 if a &lt; b, and +1 if a &gt; b</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Compare</span><span class="params">(a, b ****<span class="type">byte</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(a) &amp;&amp; i &lt; <span class="built_in">len</span>(b); i++ &#123;</span><br><span class="line">        <span class="keyword">switch</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> a**i** &gt; b**i**:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">case</span> a**i** &lt; b**i**:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="built_in">len</span>(a) &gt; <span class="built_in">len</span>(b):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> <span class="built_in">len</span>(a) &lt; <span class="built_in">len</span>(b):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用类型断言的语法和关键字类型:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">t = functionOfSomeType</span><br><span class="line"><span class="keyword">switch</span> t := t.(<span class="keyword">type</span>) &#123;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">    fmt.Printf(<span class="string">&quot;unexpected type %T\n&quot;</span>, t)     <span class="comment">// %T prints whatever type t has</span></span><br><span class="line"><span class="keyword">case</span> <span class="type">bool</span>:</span><br><span class="line">    fmt.Printf(<span class="string">&quot;boolean %t\n&quot;</span>, t)             <span class="comment">// t has type bool</span></span><br><span class="line"><span class="keyword">case</span> <span class="type">int</span>:</span><br><span class="line">    fmt.Printf(<span class="string">&quot;integer %d\n&quot;</span>, t)             <span class="comment">// t has type int</span></span><br><span class="line"><span class="keyword">case</span> *<span class="type">bool</span>:</span><br><span class="line">    fmt.Printf(<span class="string">&quot;pointer to boolean %t\n&quot;</span>, *t) <span class="comment">// t has type *bool</span></span><br><span class="line"><span class="keyword">case</span> *<span class="type">int</span>:</span><br><span class="line">    fmt.Printf(<span class="string">&quot;pointer to integer %d\n&quot;</span>, *t) <span class="comment">// t has type *int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>return</li>
</ul>
<p>尽早return：一旦有错误发生，马上返回</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">f, err := os.Open(name)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">d, err := f.Stat</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    f.Close</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">&#125;</span><br><span class="line">codeUsing(f, d)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="11-方法的接收器"><a href="#11-方法的接收器" class="headerlink" title="11.方法的接收器"></a>11.方法的接收器</h3><ul>
<li>名称 一般采用strcut的第一个字母且为小写，而不是this或者其他不符合的命名习惯</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Buffer <span class="keyword">struct</span> &#123;</span><br><span class="line">	buf       ****<span class="type">byte</span>   <span class="comment">// contents are the bytes buf**off : len(buf)**</span></span><br><span class="line">	off       <span class="type">int</span>      <span class="comment">// read at &amp;buf**off**, write at &amp;buf**len(buf)**</span></span><br><span class="line">	bootstrap **<span class="number">64</span>**<span class="type">byte</span> <span class="comment">// memory to hold first slice; helps small buffers avoid allocation.</span></span><br><span class="line">	lastRead  readOp   <span class="comment">// last read operation, so that Unread* can work correctly.</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// <span class="doctag">FIXME:</span> it would be advisable to align Buffer to cachelines to avoid false</span></span><br><span class="line">	<span class="comment">// sharing.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(b *Buffer)</span></span> Bytes ****<span class="type">byte</span> &#123; <span class="keyword">return</span> b.buf**b.off:** &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果接收者是map,slice或者chan，不要用指针传递</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Map</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> mp <span class="keyword">map</span>**<span class="type">string</span>**<span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m mp)</span></span> Set(k, v <span class="type">string</span>) &#123;</span><br><span class="line">    m**k** = v</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span></span> &#123;</span><br><span class="line">    m := <span class="built_in">make</span>(mp)</span><br><span class="line">    m.Set(<span class="string">&quot;k&quot;</span>, <span class="string">&quot;v&quot;</span>)</span><br><span class="line">    fmt.Println(m)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Channel</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ch <span class="keyword">chan</span> <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c ch)</span></span> Push(i <span class="keyword">interface</span>&#123;&#125;) &#123;</span><br><span class="line">    c &lt;- i</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c ch)</span></span> Pop <span class="keyword">interface</span>&#123;&#125; &#123;</span><br><span class="line">    <span class="keyword">return</span> &lt;-c</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span></span> &#123;</span><br><span class="line">    c := <span class="built_in">make</span>(ch, <span class="number">1</span>)</span><br><span class="line">    c.Push(<span class="string">&quot;i&quot;</span>)</span><br><span class="line">    fmt.Println(c.Pop)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>如果需要对slice进行修改，通过返回值的方式重新赋值</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Slice</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> slice ****<span class="type">byte</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span></span> &#123;</span><br><span class="line">    s := <span class="built_in">make</span>(slice, <span class="number">0</span>)</span><br><span class="line">    s = s.addOne(<span class="number">42</span>)</span><br><span class="line">    fmt.Println(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s slice)</span></span> addOne(b <span class="type">byte</span>) ****<span class="type">byte</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">append</span>(s, b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>如果接收者是含有sync.Mutex或者类似同步字段的结构体，必须使用指针传递避免复制</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">    m sync.Mutex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *T)</span></span> lock &#123;</span><br><span class="line">    t.m.Lock</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span></span> &#123;</span><br><span class="line">    t := <span class="built_in">new</span>(T)</span><br><span class="line">    t.lock</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果接收者是大的结构体或者数组，使用指针传递会更有效率。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> T <span class="keyword">struct</span> &#123;</span><br><span class="line">    data **<span class="number">1024</span>**<span class="type">byte</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(t *T)</span></span> Get <span class="type">byte</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> t.data**<span class="number">0</span>**</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span></span> &#123;</span><br><span class="line">    t := <span class="built_in">new</span>(T)</span><br><span class="line">    fmt.Println(t.Get)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>append</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b ****<span class="type">int</span></span><br><span class="line">b = <span class="built_in">append</span>(b, a...)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>使用strings.TrimPrefix 去掉前缀，strings.TrimSuffix去掉后缀</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">&quot;a value&quot;</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">&quot;a&quot;</span></span><br><span class="line"><span class="keyword">var</span> s3 = strings.TrimPrefix(s1, s2)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="string">&quot;value&quot;</span></span><br><span class="line"><span class="keyword">var</span> s2 = <span class="string">&quot;e&quot;</span></span><br><span class="line"><span class="keyword">var</span> s3 = strings.TrimSuffix(s1,s2)</span><br></pre></td></tr></table></figure>


<h3 id="12-使用工具检查你的代码"><a href="#12-使用工具检查你的代码" class="headerlink" title="12.使用工具检查你的代码"></a>12.使用工具检查你的代码</h3><ul>
<li><strong>go fmt</strong>(<a target="_blank" rel="noopener external nofollow noreferrer" href="https://golang.org/pkg/fmt/">https://golang.org/pkg/fmt/</a>)</li>
<li><strong>go vet</strong>(<a target="_blank" rel="noopener external nofollow noreferrer" href="https://golang.org/cmd/vet/">https://golang.org/cmd/vet/</a>)</li>
<li><strong>go simple</strong>(<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dominikh/go-tools/tree/master/cmd/gosimple">https://github.com/dominikh/go-tools/tree/master/cmd/gosimple</a>)</li>
<li><strong>go lint</strong>(<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/golang/lint">https://github.com/golang/lint</a>)</li>
<li><strong>errcheck</strong>(<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/kisielk/errcheck">https://github.com/kisielk/errcheck</a>)</li>
<li><strong>misspell</strong>(<a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/client9/misspell">https://github.com/client9/misspell</a>)</li>
</ul>
<h2 id="三、程序测试"><a href="#三、程序测试" class="headerlink" title="三、程序测试"></a>三、程序测试</h2><p>Golang的单元测试采用内置的测试框架,通过引入testing包以及自带的go test命令来实现单元测试和性能测试，testing框架和其他语言中的测试框架类似，你可以基于这个框架写针对相应函数的测试用例，也可以基于该框架写相应的压力测试用例.</p>
<p>此外建议安装下gotests插件自动生成测试代码:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> get -u -v github.com/cweill/gotests/...</span><br></pre></td></tr></table></figure>

<h3 id="编写测试用例"><a href="#编写测试用例" class="headerlink" title="编写测试用例"></a>编写测试用例</h3><p>因为<code>go test</code>命令只能在一个相应的目录下执行所有文件，所以我们接下来新建一个项目目录<code>gotest</code>,这样我们所有的代码和测试代码都在这个目录下。</p>
<p>接下来我们在该目录下面创建两个文件：test.go和go_test.go</p>
<p>test.go:这个文件里面我们是创建了一个包，里面有一个函数实现了除法运算:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gotest</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;errors&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Division</span><span class="params">(a, b <span class="type">float64</span>)</span></span> (<span class="type">float64</span>, <span class="type">error</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> b == <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>, errors.New(<span class="string">&quot;除数不能为0&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> a / b, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>go_test.go:这是我们的单元测试文件，但是记住下面的这些原则：</p>
<ul>
<li>文件名必须是<code>_test.go</code>结尾的，这样在执行<code>go test</code>的时候才会执行到相应的代码</li>
<li>你必须import <code>testing</code>这个包</li>
<li>所有的测试用例函数必须是<code>Test</code>开头</li>
<li>测试用例会按照源代码中写的顺序依次执行</li>
<li>测试函数<code>TestXxx</code>的参数是<code>testing.T</code>，我们可以使用该类型来记录错误或者是测试状态</li>
<li>测试格式：<code>func TestXxx (t *testing.T)</code>,<code>Xxx</code>部分可以为任意的字母数字的组合，但是首字母不能是小写字母<strong>a-z</strong>，例如<code>Testintdiv</code>是错误的函数名。</li>
</ul>
<ul>
<li>函数中通过调用<code>testing.T</code>的<code>Error</code>, <code>Errorf</code>, <code>FailNow</code>, <code>Fatal</code>, <code>FatalIf</code>方法，说明测试不通过，调用<code>Log</code>方法用来记录测试的信息。</li>
</ul>
<p>下面是我们的测试用例的代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gotest</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_Division_1</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> i, e := Division(<span class="number">6</span>, <span class="number">2</span>); i != <span class="number">3</span> || e != <span class="literal">nil</span> &#123; <span class="comment">//try a unit test on function</span></span><br><span class="line">		t.Error(<span class="string">&quot;除法函数测试没通过&quot;</span>) <span class="comment">// 如果不是如预期的那么就报错</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		t.Log(<span class="string">&quot;第一个测试通过了&quot;</span>) </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_Division_2</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	t.Error(<span class="string">&quot;error&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们在项目目录下面执行<code>go test</code>,就会显示如下信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">--- FAIL: Test_Division_2 (0.00 seconds)</span><br><span class="line">	go_test.go:16: error</span><br><span class="line">FAIL</span><br><span class="line"><span class="built_in">exit</span> status 1</span><br><span class="line">FAIL	go	0.013s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从这个结果显示测试没有通过，因为在第二个测试函数中我们写死了测试不通过的代码`t.Error`，那么我们的第一个函数执行的情况怎么样呢？默认情况下执行`go test`是不会显示测试通过的信息的，我们需要带上参数`go test -v`，这样就会显示如下信息：</span></span><br><span class="line"></span><br><span class="line">=== RUN Test_Division_1</span><br><span class="line">--- PASS: Test_Division_1 (0.00 seconds)</span><br><span class="line">	go_test.go:11: 第一个测试通过了</span><br><span class="line">=== RUN Test_Division_2</span><br><span class="line">--- FAIL: Test_Division_2 (0.00 seconds)</span><br><span class="line">	go_test.go:16: =error</span><br><span class="line">FAIL</span><br><span class="line"><span class="built_in">exit</span> status 1</span><br><span class="line">FAIL	go	0.012s</span><br></pre></td></tr></table></figure>



<p>上面的输出详细的展示了这个测试的过程，我们看到测试函数1<code>Test_Division_1</code>测试通过，而测试函数2<code>Test_Division_2</code>测试失败了，最后得出结论测试不通过。接下来我们把测试函数2修改成如下代码：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test_Division_2</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> _, e := Division(<span class="number">6</span>, <span class="number">0</span>); e == <span class="literal">nil</span> &#123; <span class="comment">//try a unit test on function</span></span><br><span class="line">		t.Error(<span class="string">&quot;Division did not work as expected.&quot;</span>) <span class="comment">// 如果不是如预期的那么就报错</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		t.Log(<span class="string">&quot;one test passed.&quot;</span>, e) <span class="comment">//记录一些你期望记录的信息</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<p>然后我们执行<code>go test -v</code>，就显示如下信息，测试通过了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">=== RUN Test_Division_1</span><br><span class="line">--- PASS: Test_Division_1 (0.00 seconds)</span><br><span class="line">	go_test.go:11: 第一个测试通过了</span><br><span class="line">=== RUN Test_Division_2</span><br><span class="line">--- PASS: Test_Division_2 (0.00 seconds)</span><br><span class="line">	go_test.go:20: one <span class="built_in">test</span> passed. 除数不能为0</span><br><span class="line">PASS</span><br><span class="line">ok  	go	0.013s</span><br></pre></td></tr></table></figure>

<h3 id="编写压力测试"><a href="#编写压力测试" class="headerlink" title="编写压力测试"></a>编写压力测试</h3><p>名称以 Benchmark 为名称前缀的函数，只能接受 *testing.B 的参数，这种测试函数是性能压力测试函数。</p>
<p>压力测试用来检测函数(方法）的性能，和编写单元功能测试的方法类似,此处不再赘述，但需要注意以下几点：</p>
<ul>
<li>压力测试用例必须遵循如下格式，其中XXX可以是任意字母数字的组合，但是首字母不能是小写字母</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">BenchmarkXXX</span><span class="params">(b *testing.B)</span></span> &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>go test</code>不会默认执行压力测试的函数，如果要执行压力测试需要带上参数<code>-test.bench</code>，语法:<code>-test.bench=&quot;test_name_regex&quot;</code>,例如<code>go test -test.bench=&quot;.*&quot;</code>表示测试全部的压力测试函数</li>
<li>在压力测试用例中,请记得在循环体内使用<code>testing.B.N</code>,以使测试可以正常的运行</li>
<li>文件名也必须以<code>_test.go</code>结尾</li>
</ul>
<p>下面我们新建一个压力测试文件webbench_test.go，代码如下所示：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gotest</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;testing&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark_Division</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123; <span class="comment">//use b.N for looping </span></span><br><span class="line">		Division(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Benchmark_TimeConsumingFunction</span><span class="params">(b *testing.B)</span></span> &#123;</span><br><span class="line">	b.StopTimer <span class="comment">//调用该函数停止压力测试的时间计数</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//做一些初始化的工作,例如读取文件数据,数据库连接之类的,</span></span><br><span class="line">	<span class="comment">//这样这些时间不影响我们测试函数本身的性能</span></span><br><span class="line"></span><br><span class="line">	b.StartTimer <span class="comment">//重新开始时间</span></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; b.N; i++ &#123;</span><br><span class="line">		Division(<span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们执行命令<code>go test webbench_test.go -test.bench=&quot;.*&quot;</code>，可以看到如下结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Benchmark_Division-4   	                     500000000	      7.76 ns/op	     456 B/op	      14 allocs/op</span><br><span class="line">Benchmark_TimeConsumingFunction-4            500000000	      7.80 ns/op	     224 B/op	       4 allocs/op</span><br><span class="line">PASS</span><br><span class="line">ok  	gotest	9.364s</span><br></pre></td></tr></table></figure>

<p>上面的结果显示我们没有执行任何<code>TestXXX</code>的单元测试函数，显示的结果只执行了压力测试函数，第一条显示了<code>Benchmark_Division</code>执行了500000000次，每次的执行平均时间是7.76纳秒，第二条显示了<code>Benchmark_TimeConsumingFunction</code>执行了500000000，每次的平均执行时间是7.80纳秒。最后一条显示总共的执行时间。</p>
<p>通过上面对单元测试和压力测试的学习，我们可以看到<code>testing</code>包很轻量，编写单元测试和压力测试用例非常简单，配合内置的<code>go test</code>命令就可以非常方便的进行测试，这样在我们每次修改完代码,执行一下go test就可以简单的完成回归测试了。</p>
<h2 id="四、基础包"><a href="#四、基础包" class="headerlink" title="四、基础包"></a>四、基础包</h2><ul>
<li><strong>archive</strong><ul>
<li><strong>tar–tar包实现了tar格式压缩文件的存取</strong></li>
<li><strong>zip–zip包提供了zip档案文件的读写服务</strong></li>
</ul>
</li>
<li><strong>bufio–bufio包实现了带缓存的I&#x2F;O操作</strong></li>
<li><strong>builtin-builtin包为Go的预声明标识符提供了文档</strong></li>
<li><strong>bytes–bytes包实现了操作****byte的常用函数</strong></li>
<li><strong>compress</strong><ul>
<li><strong>bzip2–bzip2包实现bzip2的解压缩</strong> </li>
<li><strong>flate–flate包实现了deflate压缩数据格式，参见RFC 1951</strong>   </li>
<li><strong>gzip–gzip包实现了gzip格式压缩文件的读写，参见RFC 1952</strong>   </li>
<li><strong>lzw–lzw包实现了Lempel-Ziv-Welch数据压缩格式</strong>   </li>
<li><strong>zlib–zlib包实现了对zlib格式压缩数据的读写，参见RFC 1950</strong></li>
</ul>
</li>
<li><strong>container</strong>      <ul>
<li><strong>heap–heap包提供了对任意类型（实现了heap.Interface接口）的堆操作</strong> </li>
<li><strong>list–list包实现了双向链表</strong> </li>
<li><strong>ring–ring实现了环形链表的操作</strong></li>
</ul>
</li>
<li><strong>context–context包定义了上下文类型,它跨API边界和进程之间传送截止时间，取消信号和其他请求范围的值</strong>   </li>
<li><strong>crypto–crypto包搜集了常用的密码（算法）常量.</strong> <ul>
<li><strong>aes–aes包实现了AES加密算法.</strong>      </li>
<li><strong>cipher–cipher包实现了多个标准的用于包装底层块加密算法的加密算法实现.</strong>      </li>
<li><strong>des–des包实现了DES标准和TDEA算法.</strong>      </li>
<li><strong>dsa–dsa包实现FIPS 186-3定义的数字签名算法.</strong>      </li>
<li><strong>elliptic–elliptic包实现了几条覆盖素数有限域的标准椭圆曲线.</strong>      </li>
<li><strong>hmac–hmac包实现了规定的HMAC加密哈希信息认证码.</strong>      </li>
<li><strong>md5–md5包实现了MD5哈希算法.</strong>      </li>
<li><strong>rand–rand包实现了用于加解密的更安全的随机数生成器.</strong>      </li>
<li><strong>rc4–rc4包实现了RC4加密算法.</strong>      </li>
<li><strong>rsa–rsa包实现了PKCS#1规定的RSA加密算法.</strong>      </li>
<li><strong>sha1–sha1包实现了SHA1哈希算法，参见RFC 3174.</strong>      </li>
<li><strong>sha256–sha256包实现了SHA224和SHA256哈希算法，参见FIPS 180-4</strong>      </li>
<li><strong>sha512–sha512包实现了SHA384和SHA512哈希算法，参见FIPS 180-2</strong>(.)      </li>
<li><strong>subtle–package subtle实现了在加密代码中常用的功能，但需要仔细考虑才能正确使用</strong>      </li>
<li><strong>tls–tls包实现了TLS 1.2，细节参见RFC 5246</strong>      </li>
<li><strong>x509–x509包解析X.509编码的证书和密钥</strong>      <ul>
<li><strong>pkix–pkix包提供了共享的、低层次的结构体，用于ASN.1解析和X.509证书、CRL、OCSP的序列化</strong></li>
</ul>
</li>
</ul>
</li>
<li><strong>database</strong>   <ul>
<li><strong>sql–sql包提供了通用的SQL（或类SQL）数据库接口</strong>    <ul>
<li><strong>driver–driver包定义了应被数据库驱动实现的接口，这些接口会被sql包使用</strong></li>
</ul>
</li>
</ul>
</li>
<li><strong>debug</strong><ul>
<li><strong>dwarf–提供了对从可执行文件加载的DWARF调试信息的访问</strong>       </li>
<li><strong>elf–实现了对ELF对象文件的访问</strong>       </li>
<li><strong>gosym–访问Go语言二进制程序中的调试信息</strong></li>
<li><strong>macho-实现了Mach-O对象文件的访问</strong></li>
<li><strong>macho-实现了Mach-O对象文件的访问</strong></li>
<li><strong>pe-实现了对PE（Microsoft Windows Portable Executable）文件的访问</strong></li>
<li><strong>plan9obj–plan9obj包实现了对Plan 9 a.out对象文件的访问</strong></li>
</ul>
</li>
<li><strong>encoding–encoding包定义了供其它包使用的可以将数据在字节水平和文本表示之间转换的接口</strong><ul>
<li><strong>ascii85–ascii85 包是对 ascii85 的数据编码的实现</strong>     </li>
<li><strong>asn1–asn1包实现了DER编码的ASN.1数据结构的解析，参见ITU-T Rec X.690</strong>     </li>
<li><strong>base32–base32包实现了RFC 4648规定的base32编码</strong>     </li>
<li><strong>base64–base64实现了RFC 4648规定的base64编码</strong>     </li>
<li><strong>binary–binary包实现了简单的数字与字节序列的转换以及变长值的编解码</strong>     </li>
<li><strong>csv–csv读写逗号分隔值（csv）的文件</strong>     </li>
<li><strong>gob–gob包管理gob流——在编码器（发送器）和解码器（接受器）之间交换的binary值</strong>     </li>
<li><strong>hex–hex包实现了16进制字符表示的编解码</strong>     </li>
<li><strong>json–json包实现了json对象的编解码，参见RFC 4627</strong>     </li>
<li><strong>pem–pem包实现了PEM数据编码（源自保密增强邮件协议）</strong>     </li>
<li><strong>xml–xml包实现了一个简单的XML 1.0解析器，它可以理解XML名称空间</strong></li>
</ul>
</li>
<li><strong>errors–error包实现了用于错误处理的函数</strong>        </li>
<li><strong>expvar–expvar包提供了公共变量的标准接口，如服务的操作计数器</strong>        </li>
<li><strong>flag–flag 包实现命令行标签解析</strong>        </li>
<li><strong>fmt–fmt 包实现了格式化I&#x2F;O函数，类似于C的 printf 和 scanf</strong></li>
<li><strong>go</strong><ul>
<li><strong>ast–ast包声明了用于展示Go包中的语法树类型</strong> </li>
<li><strong>build–build包提供了构建Go包的工具</strong> </li>
<li><strong>constant–constant包实现表示无类型Go常量及其相应操作的值</strong> </li>
<li><strong>doc–doc包从Go AST中提取源代码文档</strong> </li>
<li><strong>format–format包实现Go源的标准格式</strong> </li>
<li><strong>importer–importer包提供对导出数据导入程序的访问</strong> </li>
<li><strong>parser–parser包为Go源文件实现解析器</strong> </li>
<li><strong>printer–printer包实现AST节点的打印</strong> </li>
<li><strong>scanner–scanner包为Go源文本实现扫描程序</strong> </li>
<li><strong>token–token包表示Go语言的词法标记的常量和标记的基本操作</strong> </li>
<li><strong>types–types包声明数据类型并实现Go包类型检查的算法</strong></li>
</ul>
</li>
<li><strong>hash–hash包提供hash函数的接口</strong><ul>
<li><strong>adler32–adler32包实现了Adler-32校验和算法，参见RFC 1950</strong></li>
<li><strong>crc32–crc32包实现了32位循环冗余校验（CRC-32）的校验和算法</strong></li>
<li><strong>crc64–crc64包实现64位循环冗余校验或CRC-64校验</strong></li>
<li><strong>fnv–fnv包实现了FNV-1和FNV-1a（非加密hash函数）</strong></li>
</ul>
</li>
<li><strong>html–html包提供了用于转义和解转义HTML文本的函数</strong><ul>
<li><strong>template–template包（html&#x2F;template）实现了数据驱动的模板，用于生成可对抗代码注入的安全HTML输出</strong></li>
</ul>
</li>
<li><strong>image–image实现了基本的2D图片库</strong>      <ul>
<li><strong>color–color包实现了基本的颜色库</strong>     <ul>
<li><strong>palette–palette包提供了标准的调色板</strong></li>
</ul>
</li>
<li><strong>draw–draw包提供组装图片的方法</strong>      </li>
<li><strong>gif–gif包实现了GIF图片的解码</strong>      </li>
<li><strong>jpeg–jpeg包实现了jpeg格式图像的编解码</strong>      </li>
<li><strong>png–png包实现了PNG图像的编码和解码</strong></li>
</ul>
</li>
<li><strong>index</strong>          <ul>
<li><strong>suffixarray–suffixarrayb包通过使用内存中的后缀树实现了对数级时间消耗的子字符串搜索</strong></li>
</ul>
</li>
<li><strong>io–io包为I&#x2F;O原语提供了基础的接口</strong><ul>
<li><strong>ioutil–ioutil包实现了一些I&#x2F;O的工具函数</strong></li>
</ul>
</li>
<li><strong>log–log包实现了简单的日志服务</strong>   <ul>
<li><strong>syslog–syslog包提供一个简单的系统日志服务的接口</strong></li>
</ul>
</li>
<li><strong>math(math–math包提供了基本常数和数学函数)</strong><ul>
<li><strong>big–big包实现了（大数的）高精度运算.</strong></li>
<li><strong>cmplx–cmplx包为复数提供了基本的常量和数学函数</strong></li>
<li><strong>rand–rand包实现了伪随机数生成器</strong></li>
</ul>
</li>
<li><strong>mime–mime实现了MIME的部分规定</strong><ul>
<li><strong>multipart–multipart实现了MIME的multipart解析，参见RFC 2046</strong></li>
<li><strong>quotedprintable–quotedprintable包实现RFC 2045指定的quoted-printable编码</strong></li>
</ul>
</li>
<li><strong>net–net包提供了可移植的网络I&#x2F;O接口，包括TCP&#x2F;IP、UDP、域名解析和Unix域socket</strong>     <ul>
<li><strong>http–http包提供了HTTP客户端和服务端的实现</strong> <ul>
<li><strong>cgi–cgi包实现了RFC3875协议描述的CGI(公共网关接口)</strong></li>
<li><strong>cookiejar–cookiejar包实现了保管在内存中的符合RFC6265标准的http.CookieJar接口</strong></li>
<li><strong>fcgi–fcgi包实现了FastCGI协议</strong></li>
<li><strong>httptest–httptest包提供HTTP测试的单元工具</strong></li>
<li><strong>httptrace–httptrace包提供了跟踪HTTP客户端请求中的事件的机制</strong></li>
<li><strong>httputil–httputil包提供了HTTP公用函数，是对net&#x2F;http包的更常见函数的补充</strong></li>
<li><strong>pprof–pprof包通过提供HTTP服务返回runtime的统计数据，这个数据是以pprof可视化工具规定的返回格式返回的</strong></li>
</ul>
</li>
<li><strong>mail–mail包实现了解析邮件消息的功能</strong></li>
<li><strong>rpc–rpc包提供了一个方法来通过网络或者其他的I&#x2F;O连接进入对象的外部方法</strong><ul>
<li><strong>jsonrpc–jsonrpc包使用了rpc的包实现了一个JSON-RPC的客户端解码器和服务端的解码器</strong></li>
</ul>
</li>
<li><strong>smtp–smtp包实现了简单邮件传输协议（SMTP），参见RFC 5321</strong>    </li>
<li><strong>textproto–textproto实现了对基于文本的请求&#x2F;回复协议的一般性支持，包括HTTP、NNTP和SMTP</strong></li>
<li><strong>url–url包解析URL并实现了查询的逸码，参见RFC 3986</strong></li>
</ul>
</li>
<li><strong>os–os包提供了操作系统函数的不依赖平台的接口</strong><ul>
<li><strong>exec–exec包执行外部命令</strong>     </li>
<li><strong>signal–signal包实现了对输入信号的访问</strong>     </li>
<li><strong>user–user包允许通过名称或ID查询用户帐户</strong></li>
</ul>
</li>
<li><strong>path–path包实现了对斜杠分隔的路径的实用操作函数</strong>  <ul>
<li><strong>filepath–filepath包实现了兼容各操作系统的文件路径的实用操作函数</strong></li>
</ul>
</li>
<li><strong>plugin–plugin包实现了Go插件的加载和符号解析</strong> </li>
<li><strong>reflect–reflect包实现了运行时反射，允许程序操作任意类型的对象</strong>   </li>
<li><strong>regexp–regexp包实现了正则表达式搜索</strong>      <ul>
<li><strong>syntax–syntax包将正则表达式解析为语法树</strong></li>
</ul>
</li>
<li><strong>runtime–runtime包含与Go的运行时系统进行交互的操作，例如用于控制Go程的函数</strong>      <ul>
<li><strong>cgo–cgo包含有cgo工具生成的代码的运行时支持</strong>      </li>
<li><strong>debug–debug包含有程序在运行时调试其自身的功能</strong>      </li>
<li><strong>pprof–pprof包按照可视化工具pprof所要求的格式写出运行时分析数据</strong>      </li>
<li><strong>race–race包实现了数据竞争检测逻辑</strong>      </li>
<li><strong>trace–trace包实现了Go执行追踪</strong></li>
</ul>
</li>
<li><strong>sort–sort包为切片及用户定义的集合的排序操作提供了原语</strong>   </li>
<li><strong>strconv–strconv包实现了基本数据类型和其字符串表示的相互转换</strong></li>
<li><strong>strings–strings包完成对字符串的主要操作</strong></li>
<li><strong>sync–sync包提供了互斥锁这类的基本的同步原语</strong>    <ul>
<li><strong>atomic–atomic包提供了底层的原子性内存原语，这对于同步算法的实现很有用</strong>    </li>
<li><strong>Map–线程安全的map</strong>    </li>
<li><strong>Mutex–互斥锁</strong>    </li>
<li><strong>Cond–条件变量</strong>    </li>
<li><strong>Pool–临时对象池</strong>    </li>
<li><strong>Once–执行一次</strong>    </li>
<li><strong>RWMutex–读写操作的互斥锁</strong>    </li>
<li><strong>waitGroup–用于等待一组goroutine 结束</strong></li>
</ul>
</li>
<li><strong>syscall–syscall包含低级操作系统原语的接口</strong>    </li>
<li><strong>testing–testing包为Go的自动测试提供支持</strong><ul>
<li><strong>iotest–iotest包实现了主要用于读和写的测试</strong></li>
<li><strong>quick–quick包实现实用程序功能，以帮助进行黑盒测试</strong></li>
</ul>
</li>
<li><strong>text</strong>     <ul>
<li><strong>scanner–scanner包提供对utf-8文本的token扫描服务</strong></li>
<li><strong>tabwriter–tabwriter包实现了写入过滤器（tabwriter.Writer），可以将输入的缩进修正为正确的对齐文本</strong></li>
<li><strong>template–template包实现了数据驱动的用于生成文本输出的模板</strong><ul>
<li><strong>parse–parse包为文本&#x2F;模板和html &#x2F;模板定义的模板构建解析树</strong></li>
</ul>
</li>
</ul>
</li>
<li><strong>time–time包提供了时间的显示和测量用的函数</strong>        </li>
<li><strong>unicode–unicode 包提供了一些测试Unicode码点属性的数据和函数</strong>    <ul>
<li><strong>utf16–utf16包实现了对UTF-16序列的编码和解码</strong>    </li>
<li><strong>utf8–utf8包实现支持UTF-8文本编码的函数和常量</strong></li>
</ul>
</li>
<li><strong>unsafe–unsafe包含有关于Go程序类型安全的所有操作</strong></li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://fabian4.site/blog">Fabian Bao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://fabian4.site/blog/22341.html">https://fabian4.site/blog/22341.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://fabian4.site/blog" target="_blank">Fabian Bao</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/blog/tags/go/">go</a><a class="post-meta__tags" href="/blog/tags/%E8%AF%AD%E6%B3%95/">语法</a></div><div class="post_share"><div class="social-share" data-image="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/h3WuUjvQlqPEAzS.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/h3WuUjvQlqPEAzS.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/9yaek4PwfNoZEHF.jpg" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/9yaek4PwfNoZEHF.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/blog/37244.html"><img class="prev-cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/O3qPUxAlwMW8msY.jpg" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">通信协议</div></div></a></div><div class="next-post pull-right"><a href="/blog/20817.html"><img class="next-cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Go 的并发处理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/blog/48362.html" title="GO函数、方法、接口和反射"><img class="cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-12</div><div class="title">GO函数、方法、接口和反射</div></div></a></div><div><a href="/blog/25998.html" title="GO 垃圾回收、异步调度和逃逸分析"><img class="cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-16</div><div class="title">GO 垃圾回收、异步调度和逃逸分析</div></div></a></div><div><a href="/blog/2317.html" title="Go 基本结构和数据类型"><img class="cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-10</div><div class="title">Go 基本结构和数据类型</div></div></a></div><div><a href="/blog/20817.html" title="Go 的并发处理"><img class="cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-13</div><div class="title">Go 的并发处理</div></div></a></div><div><a href="/blog/43536.html" title="Python笔记-基础语法"><img class="cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/HCB61igYcvPjJbV.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-18</div><div class="title">Python笔记-基础语法</div></div></a></div><div><a href="/blog/38749.html" title="Python笔记-高级语法"><img class="cover" src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/9wpbI6VylYWotaA.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-22</div><div class="title">Python笔记-高级语法</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://fabian4.site/avatar.png" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Fabian Bao</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">文章</div><div class="length-num">73</div></a><a href="/blog/tags/"><div class="headline">标签</div><div class="length-num">54</div></a><a href="/blog/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">The best is yet to come</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Go-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E3%80%81%E7%BC%96%E7%A8%8B%E6%A0%87%E5%87%86%E3%80%81%E7%A8%8B%E5%BA%8F%E6%B5%8B%E8%AF%95%E5%92%8C%E5%9F%BA%E7%A1%80%E5%8C%85"><span class="toc-number">1.</span> <span class="toc-text">Go 环境变量、编程标准、程序测试和基础包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.1.</span> <span class="toc-text">一、环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%BC%96%E7%A8%8B%E6%A0%87%E5%87%86%E5%92%8C%E8%A7%84%E8%8C%83"><span class="toc-number">1.2.</span> <span class="toc-text">二、编程标准和规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%A1%8C%E9%95%BF"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 行长</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E5%90%8D%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 文件名命名规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8C%85"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%91%BD%E5%90%8D"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. 命名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%8F%98%E9%87%8F"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.2.6.</span> <span class="toc-text">6. 接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%87%BD%E6%95%B0%E5%92%8C%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">1.2.7.</span> <span class="toc-text">7. 函数和结构体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-import"><span class="toc-number">1.2.8.</span> <span class="toc-text">8.import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">1.2.9.</span> <span class="toc-text">9. 错误处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.10.</span> <span class="toc-text">10. 控制结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E6%96%B9%E6%B3%95%E7%9A%84%E6%8E%A5%E6%94%B6%E5%99%A8"><span class="toc-number">1.2.11.</span> <span class="toc-text">11.方法的接收器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E4%BD%BF%E7%94%A8%E5%B7%A5%E5%85%B7%E6%A3%80%E6%9F%A5%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.12.</span> <span class="toc-text">12.使用工具检查你的代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%A8%8B%E5%BA%8F%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.</span> <span class="toc-text">三、程序测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">1.3.1.</span> <span class="toc-text">编写测试用例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.2.</span> <span class="toc-text">编写压力测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%9F%BA%E7%A1%80%E5%8C%85"><span class="toc-number">1.4.</span> <span class="toc-text">四、基础包</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/55079.html" title="Mysql 执行流程和日志系统"><img src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/Hatshepsut_ZH-CN4516192627_1920x1080.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="Mysql 执行流程和日志系统"/></a><div class="content"><a class="title" href="/blog/55079.html" title="Mysql 执行流程和日志系统">Mysql 执行流程和日志系统</a><time datetime="2021-05-14T16:00:00.000Z" title="发表于 2021-05-15 00:00:00">2021-05-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/47132.html" title="Mysql 锁机制"><img src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/Italica_ZH-CN1692906751_1920x1080.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="Mysql 锁机制"/></a><div class="content"><a class="title" href="/blog/47132.html" title="Mysql 锁机制">Mysql 锁机制</a><time datetime="2021-04-24T16:00:00.000Z" title="发表于 2021-04-25 00:00:00">2021-04-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/10729.html" title="Mysql 隔离级别与MVCC"><img src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/CuscoCathedral_ZH-CN9834821723_1920x1080.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="Mysql 隔离级别与MVCC"/></a><div class="content"><a class="title" href="/blog/10729.html" title="Mysql 隔离级别与MVCC">Mysql 隔离级别与MVCC</a><time datetime="2021-04-19T16:00:00.000Z" title="发表于 2021-04-20 00:00:00">2021-04-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/58885.html" title="数据库四大性质和隔离等级"><img src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/ContainerShip_ZH-CN0850122021_1920x1080.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="数据库四大性质和隔离等级"/></a><div class="content"><a class="title" href="/blog/58885.html" title="数据库四大性质和隔离等级">数据库四大性质和隔离等级</a><time datetime="2021-04-07T16:00:00.000Z" title="发表于 2021-04-08 00:00:00">2021-04-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/5986.html" title="HashMap、HashTable和ConcurrentHashMap"><img src="https://fabian.oss-cn-hangzhou.aliyuncs.com/img/HallstattAustria_PT-BR9407016733_1920x1080.jpg" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="HashMap、HashTable和ConcurrentHashMap"/></a><div class="content"><a class="title" href="/blog/5986.html" title="HashMap、HashTable和ConcurrentHashMap">HashMap、HashTable和ConcurrentHashMap</a><time datetime="2021-04-02T16:00:00.000Z" title="发表于 2021-04-03 00:00:00">2021-04-03</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://fabian.oss-cn-hangzhou.aliyuncs.com/img/u9vgyrxMZbcAEG2.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Fabian Bao</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="/blog/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '98fe0206dedd0d2caf96',
      clientSecret: '5f2816f58a108f15feba46f9bc88497d3d6457a4',
      repo: 'blog',
      owner: 'fabian4',
      admin: ['fabian4'],
      id: '49435c44782fa1b217dc54dd69ac3d58',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>